<!DOCTYPE html><html lang="en" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Uniswap V2核心代码简析 | 0xOne1eaF's Blog Post</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" as="font" crossorigin="anonymous" href="/font/Bender.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/font/BenderLight.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/font/JetBrainsMono-Regular.woff2"><link rel="stylesheet" href="/css/arknights.css"><style>@font-face {
  font-family: Bender;
  src: local('Bender'), url("/font/Bender.ttf"), url("/font/Bender.otf");
}
@font-face {
  font-family: BenderLight;
  src: local('BenderLight'), url("/font/BenderLight.ttf");
}
@font-face {
  font-family: 'JetBrains Mono';
  src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}
</style><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"键入以继续","blurHolder":"数据检索","noResult":"无 $0 相关数据"},"code":{"codeInfo":"$0 - $1 行","copy":"复制"}}</script><link type="text/css" rel="stylesheet" href="/lib/encrypt/hbe.style.css"><script src="//unpkg.com/mermaid@10.5.0/dist/mermaid.min.js"></script><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/css/all.min.css"><script>if (window.localStorage.getItem('theme-mode') === 'light')
 document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark')
 document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.woff2") format('woff2');
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><style>:root {
 --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
 --light-background: url('/img/bk.jpg');
 --theme-encrypt-confirm: '确认'
}</style><script defer src="/js/arknights.js"></script><script defer src="/js/search.js"></script><script defer type="module">import mermaid from '//unpkg.com/mermaid@10.5.0/dist/mermaid.esm.mjs';
window.mermaid = mermaid;
code.paintMermaid();
</script><script async src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script async src="/lib/encrypt/hbe.js"></script><script async src="/js/pjax.js"></script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js','data-pjax','.busuanzi'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="loading" style="opacity: 0;"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><nav><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup" tabindex="0"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>Uniswap V2核心代码简析</h1><div id="post-info"><span>文章发布时间: <div class="control"><time datetime="2024-12-01T16:00:00.000Z" id="date"> 2024-12-02</time></div></span><br><span>最后更新时间: <div class="control"><time datetime="2024-12-02T07:36:24.649Z" id="updated"> 2024-12-02</time></div></span></div></div><hr><div id="post-content"><h1 id="Uniswap-V2核心代码简析"><a href="#Uniswap-V2核心代码简析" class="headerlink" title="Uniswap V2核心代码简析"></a>Uniswap V2核心代码简析</h1><blockquote>
<p>前言：本篇文章我将对Uniswap V2相较于V1的一些升级做出总结，并且根据github上的Uniswap V2源码进行一些中文的注释，注释参考了<a target="_blank" rel="noopener" href="https://github.com/kpyaoqi/UniswapV2_Chinese/tree/master/v2-core">UniswapV2_Chinese&#x2F;v2-core at master · kpyaoqi&#x2F;UniswapV2_Chinese</a></p>
</blockquote>
<h2 id="1-Uniswap-V2-相较于V1的优势"><a href="#1-Uniswap-V2-相较于V1的优势" class="headerlink" title="(1).Uniswap V2 相较于V1的优势"></a>(1).Uniswap V2 相较于V1的优势</h2><h3 id="1-支持任意代币对"><a href="#1-支持任意代币对" class="headerlink" title="1. 支持任意代币对"></a><strong>1. 支持任意代币对</strong></h3><ul>
<li><strong>V1</strong> 仅支持以 <strong>ETH</strong> 为中介的交易对（即每个交易对必须包含 ETH），无法直接交换两种 ERC-20 代币。</li>
<li><strong>V2</strong> 允许任何两种 ERC-20 代币直接交易，不需要通过 ETH 作为中介，这提高了灵活性并减少了交易步骤。</li>
</ul>
<h3 id="2-引入了时间加权平均价格（TWAP）"><a href="#2-引入了时间加权平均价格（TWAP）" class="headerlink" title="2. 引入了时间加权平均价格（TWAP）"></a><strong>2. 引入了时间加权平均价格（TWAP）</strong></h3><ul>
<li><strong>V1</strong> 没有内置的价格预言机制，依赖外部数据源。</li>
<li><strong>V2</strong> 引入了时间加权平均价格（TWAP），可以通过计算一定时间窗口内的价格平均值，作为价格数据的来源。这一功能不仅提供了价格保护，还能减少短期市场波动对价格的影响。</li>
</ul>
<h3 id="3-提供闪电交换（Flash-Swap）"><a href="#3-提供闪电交换（Flash-Swap）" class="headerlink" title="3. 提供闪电交换（Flash Swap）"></a><strong>3. 提供闪电交换（Flash Swap）</strong></h3><ul>
<li><strong>V1</strong> 没有提供类似功能。</li>
<li><strong>V2</strong> 引入了闪电交换功能，允许用户在交易开始时无需预先提供资金，完成交易后才结算。用户可以通过这种机制进行套利、借贷等操作。</li>
</ul>
<h3 id="4-改进的手续费机制"><a href="#4-改进的手续费机制" class="headerlink" title="4. 改进的手续费机制"></a><strong>4. 改进的手续费机制</strong></h3><ul>
<li><strong>V1</strong> 的手续费为 0.3%，且不可调节。</li>
<li><strong>V2</strong> 依旧保持 0.3% 的手续费，但协议引入了更灵活的机制，允许调整某些方面的费用结构，进一步提升了协议的可扩展性和适应性。</li>
</ul>
<h3 id="5-支持更复杂的交易逻辑"><a href="#5-支持更复杂的交易逻辑" class="headerlink" title="5. 支持更复杂的交易逻辑"></a><strong>5. 支持更复杂的交易逻辑</strong></h3><ul>
<li><strong>V2</strong> 支持通过合约执行更复杂的交易逻辑，比如支持智能合约中的多代币交换、套利等操作，这使得它可以被集成进更多的金融工具和应用。</li>
</ul>
<h3 id="6-安全性增强"><a href="#6-安全性增强" class="headerlink" title="6. 安全性增强"></a><strong>6. 安全性增强</strong></h3><ul>
<li><strong>V2</strong> 引入了更多的安全措施，尤其是防重入攻击机制。关键的合约函数（如 <code>swap</code>、<code>mint</code> 和 <code>burn</code>）都使用了锁（lock）机制，避免了可能的重入攻击。</li>
<li>还进行了 Gas 优化，减少了不必要的存储读取，提升了交易效率。</li>
</ul>
<h3 id="V2-的优势总结"><a href="#V2-的优势总结" class="headerlink" title="V2 的优势总结"></a><strong>V2 的优势总结</strong></h3><ol>
<li><strong>更高的灵活性</strong>：支持任意两种 ERC-20 代币交易，取消了 ETH 作为中介的限制。</li>
<li><strong>价格预言功能</strong>：引入了 TWAP，更加安全和稳定的价格获取方式。</li>
<li><strong>创新的闪电交换</strong>：支持用户无需预先资金即可执行复杂的交易逻辑，增加了协议的可用性。</li>
<li><strong>更强的安全性</strong>：防重入攻击和 Gas 优化使得协议在安全性和性能上都有提升。</li>
<li><strong>更高效的交易</strong>：减少了交易成本和复杂性，使交易变得更加高效和用户友好。</li>
</ol>
<h2 id="2-Uniswap-V2源码注解–UniswapV2Factory"><a href="#2-Uniswap-V2源码注解–UniswapV2Factory" class="headerlink" title="(2).Uniswap V2源码注解–UniswapV2Factory"></a>(2).Uniswap V2源码注解–UniswapV2Factory</h2><ul>
<li>先贴一下源码</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity =0.5.16;</span><br><span class="line"></span><br><span class="line">import &#x27;./interfaces/IUniswapV2Factory.sol&#x27;;</span><br><span class="line">import &#x27;./UniswapV2Pair.sol&#x27;;</span><br><span class="line"></span><br><span class="line">contract UniswapV2Factory is IUniswapV2Factory &#123;</span><br><span class="line">    address public feeTo;</span><br><span class="line">    //function feeTo() external view returns (address)：返回收取手续费地址</span><br><span class="line">    </span><br><span class="line">    address public feeToSetter;</span><br><span class="line">    //function feeToSetter() external view returns (address)：设置手续费收取地址的权限地址</span><br><span class="line"></span><br><span class="line">    mapping(address =&gt; mapping(address =&gt; address)) public getPair;</span><br><span class="line">     //function getPair(address tokenA, address tokenB) external view returns (address pair)：获取两个token的交易对地址</span><br><span class="line">     </span><br><span class="line">    address[] public allPairs;</span><br><span class="line">     //function allPairs(uint) external view returns (address pair)：返回指定位置的交易对地址</span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">    event PairCreated(address indexed token0, address indexed token1, address pair, uint);</span><br><span class="line"></span><br><span class="line">    constructor(address _feeToSetter) public &#123;</span><br><span class="line">        feeToSetter = _feeToSetter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function allPairsLength() external view returns (uint) &#123;</span><br><span class="line">        return allPairs.length;</span><br><span class="line">        //function allPairsLength() external view returns (uint)：返回所有交易对的长度</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function createPair(address tokenA, address tokenB) external returns (address pair) &#123;</span><br><span class="line">    //function createPair(address tokenA, address tokenB) external returns (address pair)：创建两个token的交易对地址</span><br><span class="line">        require(tokenA != tokenB, &#x27;UniswapV2: IDENTICAL_ADDRESSES&#x27;);</span><br><span class="line">        (address token0, address token1) = tokenA &lt; tokenB ? (tokenA, tokenB) : (tokenB, tokenA);</span><br><span class="line">        require(token0 != address(0), &#x27;UniswapV2: ZERO_ADDRESS&#x27;);</span><br><span class="line">        require(getPair[token0][token1] == address(0), &#x27;UniswapV2: PAIR_EXISTS&#x27;); // single check is sufficient</span><br><span class="line">        bytes memory bytecode = type(UniswapV2Pair).creationCode;</span><br><span class="line">        bytes32 salt = keccak256(abi.encodePacked(token0, token1));</span><br><span class="line">        assembly &#123;</span><br><span class="line">        	//add(bytecode, 32)：opcode操作码的add方法,将bytecode偏移后32位字节处,因为前32位字节存的是bytecode长度</span><br><span class="line">			//mload(bytecode)：opcode操作码的方法,获得bytecode长度</span><br><span class="line">            pair := create2(0, add(bytecode, 32), mload(bytecode), salt)</span><br><span class="line">        &#125;</span><br><span class="line">        IUniswapV2Pair(pair).initialize(token0, token1);</span><br><span class="line">        getPair[token0][token1] = pair;</span><br><span class="line">        getPair[token1][token0] = pair; // populate mapping in the reverse direction</span><br><span class="line">        allPairs.push(pair);</span><br><span class="line">        emit PairCreated(token0, token1, pair, allPairs.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function setFeeTo(address _feeTo) external &#123;</span><br><span class="line">        require(msg.sender == feeToSetter, &#x27;UniswapV2: FORBIDDEN&#x27;);</span><br><span class="line">        feeTo = _feeTo;</span><br><span class="line">        //function setFeeTo(address) external：更改收取手续费地址</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function setFeeToSetter(address _feeToSetter) external &#123;</span><br><span class="line">        require(msg.sender == feeToSetter, &#x27;UniswapV2: FORBIDDEN&#x27;);</span><br><span class="line">        feeToSetter = _feeToSetter;</span><br><span class="line">        //function setFeeToSetter(address) external：更改设置手续费收取地址的权限地址</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>上述合约中的每个方法后面都跟上了方法的目的，现在让我们单独来看这段代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">bytes32 salt = keccak256(abi.encodePacked(token0, token1));//-1</span><br><span class="line"></span><br><span class="line">bytes memory bytecode = type(UniswapV2Pair).creationCode;//-2</span><br><span class="line"></span><br><span class="line">assembly &#123;</span><br><span class="line">	//add(bytecode, 32)：opcode操作码的add方法,将bytecode偏移后32位字节处,因为前32位字节存的是bytecode长度</span><br><span class="line">	//mload(bytecode)：opcode操作码的方法,获得bytecode长度</span><br><span class="line">	pair := create2(0, add(bytecode, 32), mload(bytecode), salt)</span><br><span class="line">&#125;//-3</span><br></pre></td></tr></table></figure>

<ol>
<li><p>这段代码使用了 Solidity 的 <strong><code>create2</code></strong> 操作来部署一个智能合约(UniswapV2Pair-交易对合约)，并且采用了 <strong><code>keccak256</code></strong> 哈希函数来生成一个唯一的 <strong>salt</strong>。<strong>salt</strong> 是基于 <code>token0</code> 和 <code>token1</code> 这两个代币地址组合生成的。<code>keccak256</code> 是一种常用的加密哈希算法，生成的 32 字节值（<code>bytes32</code> 类型）将作为 <code>create2</code> 操作的盐值。</p>
</li>
<li><p>这一行获取 <code>UniswapV2Pair</code> 合约的 <strong>字节码</strong>，也就是合约的创建代码。<code>type(UniswapV2Pair).creationCode</code> 获取 <code>UniswapV2Pair</code> 合约的字节码，<code>UniswapV2Pair</code> 是 Uniswap 中定义交易对（pair）的合约。</p>
<p><code>bytecode</code> 变量将包含该合约的构造代码（即部署时的合约代码），它将被用来部署新的 <code>UniswapV2Pair</code> 合约。</p>
</li>
<li><p>这一部分使用了 Solidity 中的 <strong>低级 <code>assembly</code></strong> 来执行合约的部署。</p>
<ul>
<li><p><code>add(bytecode, 32)</code>：由于字节码的前 32 字节存储的是字节码的长度，所以 <code>add(bytecode, 32)</code> 将字节码的位置偏移 32 字节，确保我们获得的是字节码本身，而不是字节码长度。</p>
</li>
<li><p><code>mload(bytecode)</code>：该操作会返回存储在 <code>bytecode</code> 地址中的第一个 32 字节（即字节码的长度）。</p>
</li>
<li><p><code>create2 </code>是一个低级操作码，用来根据 <code>salt</code> 和字节码部署一个新的合约。</p>
</li>
<li><p>它的参数如下：</p>
<ul>
<li><code>0</code>：这是部署合约时传递的以太坊余额。这里是 0，意味着不向新合约发送以太坊。</li>
<li><code>add(bytecode, 32)</code>：字节码的地址（偏移了 32 字节）。</li>
<li><code>mload(bytecode)</code>：字节码的长度。</li>
<li><code>salt</code>：前面生成的盐值，这里是基于 <code>token0</code> 和 <code>token1</code> 地址计算得到的哈希值。</li>
</ul>
</li>
</ul>
<p><strong><code>create2</code> 的作用是根据提供的字节码和盐值来确定合约地址，从而在部署合约时保证合约地址的唯一性</strong>。即通过盐值与字节码计算生成合约地址，并在相同的输入条件下，每次都能部署到相同的地址。</p>
<p><code>create2</code> 可以避免在多个合约部署过程中产生冲突，特别是在合约地址已知的情况下，可以确保合约地址的可预测性。这在一些 DeFi 协议中非常有用，比如 Uniswap 使用 <code>create2</code> 部署交易对合约（<code>UniswapV2Pair</code>），这样每对代币的交易对合约地址都是唯一且可预测的。</p>
</li>
</ol>
<blockquote>
<p>assembly-内联汇编：在 Solidity 源程序中嵌入汇编代码，对 EVM 有更细粒度的控制</p>
</blockquote>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/news/">← 下一篇 就像冬天下雪，不算多特别</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2024/11/29/uniswap-v1-ill-deep/">Uniswap V1--深度探索 上一篇 →</a></div></div></div></div><div class="bottom-btn"><div><a class="i-top" id="to-top" onClick="scrolls.scrolltop();" title="回到顶部" style="opacity: 0; display: none;">∧ </a><a class="i-index" id="to-index" href="#toc-div" title="文章目录">≡</a><a class="i-color" id="color-mode" onClick="colorMode.change()" title="切换主题"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="/img/1.png" alt="Logo"></a><h1 id="Dr"><a>0xOne1eaF</a></h1><div id="description"><p></p></div></div><div id="aside-block"><div id="toc-div"><h1>目录</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Uniswap-V2%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81%E7%AE%80%E6%9E%90"><span class="toc-number">1.</span> <span class="toc-text">Uniswap V2核心代码简析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Uniswap-V2-%E7%9B%B8%E8%BE%83%E4%BA%8EV1%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">1.1.</span> <span class="toc-text">(1).Uniswap V2 相较于V1的优势</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%94%AF%E6%8C%81%E4%BB%BB%E6%84%8F%E4%BB%A3%E5%B8%81%E5%AF%B9"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. 支持任意代币对</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BC%95%E5%85%A5%E4%BA%86%E6%97%B6%E9%97%B4%E5%8A%A0%E6%9D%83%E5%B9%B3%E5%9D%87%E4%BB%B7%E6%A0%BC%EF%BC%88TWAP%EF%BC%89"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. 引入了时间加权平均价格（TWAP）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8F%90%E4%BE%9B%E9%97%AA%E7%94%B5%E4%BA%A4%E6%8D%A2%EF%BC%88Flash-Swap%EF%BC%89"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. 提供闪电交换（Flash Swap）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%94%B9%E8%BF%9B%E7%9A%84%E6%89%8B%E7%BB%AD%E8%B4%B9%E6%9C%BA%E5%88%B6"><span class="toc-number">1.1.4.</span> <span class="toc-text">4. 改进的手续费机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%94%AF%E6%8C%81%E6%9B%B4%E5%A4%8D%E6%9D%82%E7%9A%84%E4%BA%A4%E6%98%93%E9%80%BB%E8%BE%91"><span class="toc-number">1.1.5.</span> <span class="toc-text">5. 支持更复杂的交易逻辑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%AE%89%E5%85%A8%E6%80%A7%E5%A2%9E%E5%BC%BA"><span class="toc-number">1.1.6.</span> <span class="toc-text">6. 安全性增强</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#V2-%E7%9A%84%E4%BC%98%E5%8A%BF%E6%80%BB%E7%BB%93"><span class="toc-number">1.1.7.</span> <span class="toc-text">V2 的优势总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Uniswap-V2%E6%BA%90%E7%A0%81%E6%B3%A8%E8%A7%A3%E2%80%93UniswapV2Factory"><span class="toc-number">1.2.</span> <span class="toc-text">(2).Uniswap V2源码注解–UniswapV2Factory</span></a></li></ol></li></ol></div></div><footer><nobr>构建自 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> 使用主题 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr> 主题作者 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas></body></html>